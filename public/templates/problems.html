<a href="#/problems/new">Create new problem</a>

<hr/>

<form id="problem-search" class="form-search" ng-submit="search()">
    <input type="text" class="span7 search-query" ng-model="query" ui-select2="querySelect2Options">
    <img src="/js/select2/select2-spinner.gif" width="16" height="16" ng-show="!queryReturned"/>
</form>

<table id="problem-list" class="table table-striped table-hover" ng-show="queryReturned">
    <thead>
    <tr>
        <th style="width: 3em"><a href="" ng-click="predicate = 'date'; reverse=!reverse">Date</a></th>
        <th><a href="" ng-click="predicate = 'description'; reverse=!reverse">Description</a></th>
        <th style="width: 7em"><a href="" ng-click="predicate = 'customerCompany'; reverse=!reverse">Company</a></th>
        <th style="width: 6em; text-align: right"><a href="" ng-click="predicate = 'annualRevenue'; reverse=!reverse">ARR</a></th>
        <th style="width: 7em"><a href="" ng-click="predicate = 'customerName'; reverse=!reverse">Customer</a></th>
        <th style="width: 7em"><a href="" ng-click="predicate = 'feature.name'; reverse=!reverse">Feature</a></th>
        <th style="width: 3em"><a href="" ng-click="predicate = 'lastModified'; reverse=!reverse">Mod</a></th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="problem in problems | orderBy:predicate:reverse">
        <td><span tooltip="{{problem.reporter.name}} on {{problem.date | date}}" tooltip-placement="right">{{problem.date | date:'MMM d'}}</span></td>
        <td class="flex"><a href="#/problems/{{problem.id}}">{{problem.description | truncate:200 | minlinks}}</a></td>
        <td class="flex">
            <span ng-show="!problem.accountId">{{problem.customerCompany | truncate:15}}</span>
            <a href="https://rpm.newrelic.com/accounts/{{problem.accountId}}" ng-show="problem.accountId" target="_blank">{{problem.customerCompany | truncate:15}}</a>
        </td>
        <td style="text-align: right"><span ng-show="problem.annualRevenue > 0">{{problem.annualRevenue | noFractionCurrency}}</span></td>
        <td class="flex"><a href="mailto:{{problem.customerEmail}}">{{problem.customerName | truncate:15}}</a></td>
        <td class="flex"><a ng-click="selectFeature(problem.feature)" ng-show="problem.feature">{{problem.feature.title | truncate:30}}</a></td>
        <td><span tooltip="{{problem.lastModifiedBy.name}} on {{problem.lastModified | date}}" tooltip-placement="left">{{problem.lastModified | date:'MMM d'}}</span></td>
    </tr>
    </tbody>
</table>

